<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Lista Asignaciones</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
        <link rel="stylesheet" th:href="@{/css/style.css}">

    </head>
    <body class="bg-light">
        <div class="container mt-4">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2>Asignaciones Empleado - Zona</h2>
                <a class="btn btn-success" th:href="@{/empleadozona/asignar}">+ Nueva Asignación</a>
            </div>

            <div th:each="emp : ${empleados}" class="mb-4">
                <h5 th:text="${emp.nombre + ' (' + emp.codigo + ')'}"></h5>

                <table class="table table-bordered bg-white">
                    <thead class="table-dark">
                        <tr><th>ID Zona</th><th>Zona</th><th>Precio</th><th>Acciones</th></tr>
                    </thead>
                    <tbody>
                        <tr th:each="ez : ${emp.empleadoZonas}">
                            <td th:text="${ez.zona.idZona}"></td>
                            <td th:text="${ez.zona.nombre}"></td>
                            <td th:text="${ez.zona.precioMensual}"></td>
                            <td>
                                <a class="btn btn-warning btn-sm" th:href="@{/empleadozona/editar/{empId}/{zonaId}(empId=${emp.idEmpleado},zonaId=${ez.zona.idZona})}">
                                    Editar
                                </a>
                                <a class="btn btn-danger btn-sm"
                                   th:href="@{/empleadozona/eliminar(empleadoId=${emp.idEmpleado},zonaId=${ez.zona.idZona})}"
                                   onclick="return confirm('Eliminar asignación?')">
                                    Eliminar
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
          <div th:replace="fragments/botones :: volver"></div>
    </body>
</html>
